<!DOCTYPE html>
<html lang="en">
{{ template "head" . }}
<body>

<div class="container-fluid">
    {{ $devs := .Devices }}
    {{ $temperatures := .Temperatures }}
    {{ $device := .Device }}
    {{ $rgbModes := .Device.RGBModes }}
    {{ $rgb := .Rgb }}
    {{ $deviceProfile := .Device.DeviceProfile }}
    <input type="hidden" id="deviceId" name="deviceId" value="{{ $device.Serial }}">
    <input type="hidden" id="zones" name="zones" value="{{ $device.ZoneAmount }}">

    <div class="row">
        <!-- Sidebar -->
        {{ template "sidebar" . }}

        <!-- Main -->
        <main class="main-content p-4">
            <!-- Temperature bar -->
            {{ if .Dashboard.TemperatureBar }}
            {{ template "temperature-bar" . }}
            {{ end }}

            {{ if eq .Device.Connected false }}
            {{ template "404-no-device" . }}
            {{ else }}

            <!-- VIRTUOSO MAX WIRELESS -->
            <div class="row g-4 mb-4 align-items-start">
                <div class="col-md-2">
                    <div class="card system-card text-center">
                        <div class="card-header">
                            {{ .Device.Product }}
                        </div>
                        <div class="card-body">
                            <div class="settings-list">
                                <!-- Firmware -->
                                <div class="settings-row">
                                    <span class="settings-label text-ellipsis">{{ .Lang "txtFirmware" }}</span>
                                    <span class="meta-value">{{ .Device.Firmware }}</span>
                                </div>

                                <!-- User profile -->
                                <div class="settings-row">
                                    <span class="settings-label text-ellipsis">{{ .Lang "txtProfile" }}</span>
                                    <label for="profiles">
                                        <select id="profiles" class="form-select system-select compact auto-width userProfile" name="userProfile">
                                            {{ range $key, $profile := $device.UserProfiles }}
                                            {{ if $profile.Active }}
                                            <option value="{{ $key }}" selected>{{ $key }}</option>
                                            {{ else }}
                                            <option value="{{ $key }}">{{ $key }}</option>
                                            {{ end }}
                                            {{ end }}
                                        </select>
                                    </label>
                                </div>

                                <!-- Brightness -->
                                <div class="settings-row">
                                    <span class="settings-label text-ellipsis">{{ .Lang "txtBrightness" }}</span>
                                    <div class="system-slider no-padding-top">
                                        <label for="brightnessSlider">
                                            <input type="range" id="brightnessSlider" name="brightnessSlider" min="0" max="100" value="{{ $deviceProfile.BrightnessSlider }}" step="1">
                                        </label>
                                        <div class="slider-value" id="brightnessSliderValue">{{ $deviceProfile.BrightnessSlider }} %</div>
                                    </div>
                                </div>

                                <!-- RGB Profile -->
                                <div class="settings-row">
                                    <span class="settings-label text-ellipsis">{{ .Lang "txtRgb" }}</span>
                                    <label for="rgbProfile">
                                        <select id="rgbProfile" class="form-select system-select compact auto-width miscRgbProfile" name="miscRgbProfile">
                                            {{ range $key, $mode := $rgbModes }}
                                            {{ if eq $mode $device.DeviceProfile.RGBProfile }}
                                            <option value="0;{{ $mode }}" selected>{{ $mode }}</option>
                                            {{ else }}
                                            <option value="0;{{ $mode }}">{{ $mode }}</option>
                                            {{ end }}
                                            {{ end }}
                                        </select>
                                    </label>
                                </div>

                                <!-- Sleep -->
                                <div class="settings-row">
                                    <span class="settings-label text-ellipsis">{{ .Lang "txtSleep" }}</span>
                                    <label for="sleepModes">
                                        <select id="sleepModes" class="form-select system-select compact auto-width headsetSleepModes" name="sleepModes">
                                            {{ range $key, $sleepMode := $device.SleepModes }}
                                            {{ if eq $device.DeviceProfile.SleepMode $key }}
                                            <option value="{{ $key }}" selected>{{ $sleepMode }}</option>
                                            {{ else }}
                                            <option value="{{ $key }}">{{ $sleepMode }}</option>
                                            {{ end }}
                                            {{ end }}
                                        </select>
                                    </label>
                                </div>

                                <!-- Mic LED -->
                                <div class="settings-row">
                                    <span title='{{ .Lang "txtDisableLedOnActiveMic" }}' class="settings-label text-ellipsis">{{ .Lang "txtMicLed" }}</span>
                                    <label class="system-toggle compact">
                                        <input type="checkbox" class="toggleMuteIndicators" {{ if $deviceProfile.DisableMicIndicator }} checked {{ end }}>
                                        <span class="toggle-track"></span>
                                    </label>
                                </div>

                                <!-- Active Noise Cancellation  -->
                                <div class="settings-row">
                                    <span title='{{ .Lang "txtANC" }}' class="settings-label text-ellipsis">{{ .Lang "txtANCString" }}</span>
                                    <label for="noiseCancellationMode">
                                        <select id="noiseCancellationMode" class="form-select system-select compact auto-width noiseCancellationMode" name="noiseCancellationMode">
                                            {{ range $key, $value := $device.NoiseCancellations }}
                                            {{ if eq $device.DeviceProfile.NoiseCancellation $key }}
                                            <option value="{{ $key }}" selected>{{ $value }}</option>
                                            {{ else }}
                                            <option value="{{ $key }}">{{ $value }}</option>
                                            {{ end }}
                                            {{ end }}
                                        </select>
                                    </label>
                                </div>

                                <!-- Sidetone -->
                                <div class="settings-row">
                                    <span title='{{ .Lang "txtSidetone" }}' class="settings-label text-ellipsis">{{ .Lang "txtSidetone" }}</span>
                                    <label class="system-toggle compact">
                                        <input type="checkbox" class="toggleSidetone" {{ if $deviceProfile.SideTone }} checked {{ end }}>
                                        <span class="toggle-track"></span>
                                    </label>
                                </div>

                                <!-- Side tone value -->
                                <div class="settings-row">
                                    <span class="settings-label text-ellipsis">{{ .Lang "txtSidetoneValue" }}</span>
                                    <div class="system-slider no-padding-top">
                                        <label for="brightnessSlider">
                                            <input type="range" id="sideToneValue" name="sideToneValue" min="1" max="100" value="{{ $deviceProfile.SideToneValue }}" step="1">
                                        </label>
                                        <div class="slider-value" id="sideToneValueText">{{ $deviceProfile.SideToneValue }} %</div>
                                    </div>
                                </div>

                                <!-- Left Wheel -->
                                <div class="settings-row">
                                    <span title='{{ .Lang "txtAssignLeftWheel" }}' class="settings-label text-ellipsis">{{ .Lang "txtLeftWheel" }}</span>
                                    <label for="leftWheel">
                                        <select id="leftWheel" class="form-select system-select compact auto-width wheel-select" name="leftWheel" data-wheel-id="1">
                                            {{ range $key, $value := $device.WheelOptions }}
                                            {{ if eq $device.DeviceProfile.LeftWheel $key }}
                                            <option value="{{ $key }}" selected>{{ $value }}</option>
                                            {{ else }}
                                            <option value="{{ $key }}">{{ $value }}</option>
                                            {{ end }}
                                            {{ end }}
                                        </select>
                                    </label>
                                </div>

                                <!-- Right Wheel -->
                                <div class="settings-row">
                                    <span title='{{ .Lang "txtAssignRightWheel" }}' class="settings-label text-ellipsis">{{ .Lang "txtRightWheel" }}</span>
                                    <label for="rightWheel">
                                        <select id="rightWheel" class="form-select system-select compact auto-width wheel-select" name="rightWheel" data-wheel-id="2">
                                            {{ range $key, $value := $device.WheelOptions }}
                                            {{ if eq $device.DeviceProfile.RightWheel $key }}
                                            <option value="{{ $key }}" selected>{{ $value }}</option>
                                            {{ else }}
                                            <option value="{{ $key }}">{{ $value }}</option>
                                            {{ end }}
                                            {{ end }}
                                        </select>
                                    </label>
                                </div>

                                <!-- Delete user profile -->
                                <div class="settings-row">
                                    <span class="settings-label text-ellipsis">{{ .Lang "txtDeleteProfile" }}</span>
                                    <label for="deleteUserProfiles">
                                        <select id="deleteUserProfiles" class="form-select system-select compact auto-width deleteUserProfiles" name="deleteUserProfiles">
                                            <option value="none">None</option>
                                            {{ range $key, $profile := $device.UserProfiles }}
                                            {{ if $profile.Active }}
                                            {{ continue }}
                                            {{ else }}
                                            <option value="{{ $key }}">{{ $key }}</option>
                                            {{ end }}
                                            {{ end }}
                                        </select>
                                    </label>
                                </div>

                                <!-- Save profile -->
                                <div class="settings-row">
                                    <button class="system-button center saveUserProfile">{{ .Lang "txtSaveUserProfile" }}</button>
                                    <button class="system-button danger center deleteUserProfile">{{ .Lang "txtDeleteProfile" }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-10">
                    <div class="card system-card text-center">
                        <div class="card-body">
                            <div class="headset-view">
                                <input type="color" id="colorPicker" class="color-picker">
                                <!-- LEFT -->
                                <div class="earcup">
                                    <div class="earcup-ring">
                                        <div class="ring-segment seg-1" id="zoneColor_0" data-seg="1"></div>
                                        <div class="ring-segment seg-2" id="zoneColor_1" data-seg="2"></div>
                                        <div class="ring-segment seg-3" id="zoneColor_2" data-seg="3"></div>
                                    </div>
                                    <div class="earcup-center">L</div>
                                </div>

                                <!-- RIGHT -->
                                <div class="earcup">
                                    <div class="earcup-ring">
                                        <div class="ring-segment seg-1" id="zoneColor_3" data-seg="1"></div>
                                        <div class="ring-segment seg-2" id="zoneColor_4" data-seg="2"></div>
                                        <div class="ring-segment seg-3" id="zoneColor_5" data-seg="3"></div>
                                    </div>
                                    <div class="earcup-center">R</div>
                                </div>

                            </div>
                            <div class="canvas-bottom">
                                <div class="system-input system-color inline-controls">
                                    <button class="system-button" id="saveHeadsetZoneColors">{{ .Lang "txtSaveZoneColors" }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
        </main>
    </div>
</div>
<script src="/static/js/overview.js"></script>
<script src="/static/js/headset.js"></script>
<script src="/static/js/devices/virtuoso-max.js"></script>
<script src="/static/js/sidebar.js"></script>
{{ if .Dashboard.TemperatureBar }}
<script src="/static/js/temperature-bar.js"></script>
{{ end }}
</body>
</html>
